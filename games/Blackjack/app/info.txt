Contains all the working stuff